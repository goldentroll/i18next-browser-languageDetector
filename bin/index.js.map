{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","lib/Browser.js","lib/browserLookups/cookie.js","lib/browserLookups/localStorage.js","lib/browserLookups/navigator.js","lib/browserLookups/querystring.js","lib/utils.js"],"names":[],"mappings":"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","file":"index.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import * as utils from './utils';\nimport cookie from './browserLookups/cookie';\nimport querystring from './browserLookups/querystring';\nimport localStorage from './browserLookups/localStorage';\nimport navigator from './browserLookups/navigator';\n\nfunction getDefaults() {\n  return {\n    order: ['querystring', 'cookie', 'localStorage', 'navigator'],\n    lookupQuerystring: 'lng',\n    lookupCookie: 'i18next',\n    lookupLocalStorage: 'i18nextLng',\n\n    // cache user language\n    caches: ['localStorage']\n    //cookieMinutes: 10,\n    //cookieDomain: 'myDomain'\n  };\n}\n\nclass Browser {\n  constructor(services, options = {}) {\n    this.init(services, options);\n\n    this.type = 'languageDetector';\n    this.detectors = {};\n  }\n\n  init(services, options = {}) {\n    this.services = services;\n    this.options = utils.defaults(options, this.options || {}, getDefaults());\n\n    this.addDetector(cookie);\n    this.addDetector(querystring);\n    this.addDetector(localStorage);\n    this.addDetector(navigator);\n  }\n\n  addDetector(detector) {\n    this.detectors[detector.name] = detector;\n  }\n\n  detect(detectionOrder) {\n    if (!detectionOrder) detectionOrder = this.options.order;\n\n    let detected = [];\n    detectionOrder.forEach(function(detectorName) {\n      if (this.detectors[detectorName]) {\n        let lookup = this.detectors[detectorName].lookup(this.options);\n        if (lookup && typeof lookup === 'string') lookup = [lookup];\n        if (lookup) detected = detected.concat(lookup);\n      }\n    });\n\n    let found;\n    detected.forEach(lng => {\n      if (found) return;\n      let cleanedLng = this.services.languageUtils.formatLanguageCode(lng);\n      if (this.services.languageUtils.isWhitelisted(cleanedLng)) found = cleanedLng;\n    });\n\n    return found || this.options.fallbackLng[0];\n  }\n\n  cacheUserLanguage(lng, caches) {\n    if (!caches) caches = this.options.detection.caches;\n    caches.forEach(function(cacheName) {\n      if (this.detectors[cacheName]) {\n        this.detectors[cacheName].cacheUserLanguage(lng, this.options);\n      }\n    });\n  }\n}\n\nexport default Browser;\n","let cookie = {\n  create: function(name,value,minutes,domain) {\n    let expires;\n    if (minutes) {\n      let date = new Date();\n      date.setTime(date.getTime() + (minutes * 60 * 1000));\n      expires = '; expires=' + date.toGMTString();\n    }\n    else expires = '';\n    domain = domain ? 'domain=' + domain + ';' : '';\n    document.cookie = name + '=' + value + expires + ';' + domain + 'path=/';\n  },\n\n  read: function(name) {\n    let nameEQ = name + '=';\n    let ca = document.cookie.split(';');\n    for(let i=0; i < ca.length; i++) {\n      let c = ca[i];\n      while (c.charAt(0) === ' ') c = c.substring(1, c.length);\n      if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length,c.length);\n    }\n    return null;\n  },\n\n  remove: function(name) {\n    this.create(name, '', -1);\n  }\n};\n\nexport default {\n  name: 'cookie',\n\n  lookup(options) {\n    let found;\n\n    if (options.lookupCookie && typeof document !== 'undefined') {\n      var c = cookie.read(options.lookupCookie);\n      if (c) found = c;\n    }\n\n    return found;\n  },\n\n  cacheUserLanguage(lng, options) {\n    if (options.lookupCookie && typeof document !== 'undefined') {\n      cookie.create(options.lookupCookie, lng, options.cookieMinutes, options.cookieDomain);\n    }\n  }\n};\n","let storage = {\n  setItem: function(key, value) {\n    if (window.localStorage) {\n      try {\n        window.localStorage.setItem(key, value);\n      } catch (e) {\n        //f.log('failed to set value for key '' + key + '' to localStorage.');\n      }\n    }\n  },\n  getItem: function(key, value) {\n    if (window.localStorage) {\n      try {\n        return window.localStorage.getItem(key, value);\n      } catch (e) {\n        //f.log('failed to get value for key '' + key + '' from localStorage.');\n        return undefined;\n      }\n    }\n  }\n};\n\nexport default {\n  name: 'localStorage',\n\n  lookup(options) {\n    let found;\n\n    if (options.lookupLocalStorage && typeof window !== 'undefined' && window.localStorage) {\n      var lng = storage.getItem(options.lookupLocalStorage);\n      if (lng) found = lng;\n    }\n\n    return found;\n  },\n\n  cacheUserLanguage(lng, options) {\n    if (options.lookupLocalStorage && typeof window !== 'undefined' && window.localStorage) {\n      storage.setItem(options.lookupLocalStorage, lng);\n    }\n  }\n};\n","export default {\n  name: 'navigator',\n\n  lookup(options) {\n    let found = [];\n\n    if (typeof navigator !== 'undefined') {\n      if (navigator.languages) { // chrome only; not an array, so can't use .push.apply instead of iterating\n        for (let i=0; i < navigator.languages.length; i++) {\n          found.push(navigator.languages[i]);\n        }\n      }\n      if (navigator.userLanguage) {\n        found.push(navigator.userLanguage);\n      }\n      if (navigator.language) {\n        found.push(navigator.language);\n      }\n    }\n\n    return found.length > 0 ? found : undefined;\n  }\n};\n","export default {\n  name: 'querystring',\n\n  lookup(options) {\n    let found;\n\n    if (typeof window !== 'undefined') {\n      let query = window.location.search.substring(1);\n      let params = query.split('&');\n      for (let i=0; i<params.length; i++) {\n        let pos = params[i].indexOf('=');\n        if (pos > 0) {\n          let key = params[i].substring(0,pos);\n          if (key === options.lookupQuerystring) {\n            found = params[i].substring(pos+1);\n          }\n        }\n      }\n    }\n\n    return found;\n  }\n};\n","let arr = [];\nlet each = arr.forEach;\nlet slice = arr.slice;\n\nexport function defaults(obj) {\n  each.call(slice.call(arguments, 1), function(source) {\n    if (source) {\n      for (var prop in source) {\n        if (obj[prop] === undefined) obj[prop] = source[prop];\n      }\n    }\n  });\n  return obj;\n}\n\nexport function extend(obj) {\n  each.call(slice.call(arguments, 1), function(source) {\n    if (source) {\n      for (var prop in source) {\n        obj[prop] = source[prop];\n      }\n    }\n  });\n  return obj;\n}\n"]}